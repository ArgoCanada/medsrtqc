

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Abstract base classes &mdash; MEDS Realtime QC  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NetCDF IO" href="nc.html" />
    <link rel="prev" title="medsrtqc" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MEDS Realtime QC
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Abstract base classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="nc.html">NetCDF IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="vms.html">VMS IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resource files</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MEDS Realtime QC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Abstract base classes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-medsrtqc.core">
<span id="abstract-base-classes"></span><h1>Abstract base classes<a class="headerlink" href="#module-medsrtqc.core" title="Permalink to this headline">¶</a></h1>
<p>Writing portable QC operations shouldn’t depend on the underlying
data storage mechanism, which might be a database, NetCDF file,
or binary export. The classes in the <code class="docutils literal notranslate"><span class="pre">core</span></code> module are designed to
provide a view of Argo data that can be passed to or returned from
QC operations. Here Argo data are modeled as a three-level heiarchy
where <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> objects are contained by <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> objects
which are in turn contained by <a class="reference internal" href="#medsrtqc.core.ProfileList" title="medsrtqc.core.ProfileList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProfileList</span></code></a> objects.</p>
<dl class="py class">
<dt class="sig sig-object py" id="medsrtqc.core.Profile">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">Profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.Profile" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for the concept of a “Profile”.
Unlike a “Profile” in an Argo NetCDF file, these objects should contain
all parameters measured during an ascent (or some other event
that can be QCed). The interface is dict-like with elements as
<a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> objects that can be extracted by name or iterated
over using <code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code>. The base class can wrap
a <code class="docutils literal notranslate"><span class="pre">dict</span></code> of <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> objects.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="medsrtqc.core.ProfileList">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">ProfileList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.ProfileList" title="Permalink to this definition">¶</a></dt>
<dd><p>An base class for a collection of Profile objects.
These objects are list-like with each member
as a <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> implementation. The base class wraps
a <code class="docutils literal notranslate"><span class="pre">list()</span></code> of <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> objects.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">QCOperation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">previous_profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">applier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperation" title="Permalink to this definition">¶</a></dt>
<dd><p>A QC operation here is instantiated with a target
<a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> and the previous <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> as these
are needed to implement many of the tests. QC operations
should implement the <code class="docutils literal notranslate"><span class="pre">run()</span></code> method and use the built-in
methods to do any data updates.</p>
<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperation.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperation.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience wrapper for <a class="reference internal" href="#medsrtqc.core.QCOperationApplier.log" title="medsrtqc.core.QCOperationApplier.log"><code class="xref py py-func docutils literal notranslate"><span class="pre">QCOperationApplier.log()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperation.pyplot">
<span class="sig-name descname"><span class="pre">pyplot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperation.pyplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience wrapper for <a class="reference internal" href="#medsrtqc.core.QCOperationApplier.pyplot" title="medsrtqc.core.QCOperationApplier.pyplot"><code class="xref py py-func docutils literal notranslate"><span class="pre">QCOperationApplier.pyplot()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperation.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperation.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the test. This method must be implemented by test subclasses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperation.update_trace">
<span class="sig-name descname"><span class="pre">update_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperation.update_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience wrapper for <a class="reference internal" href="#medsrtqc.core.QCOperationApplier.update_trace" title="medsrtqc.core.QCOperationApplier.update_trace"><code class="xref py py-func docutils literal notranslate"><span class="pre">QCOperationApplier.update_trace()</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperationApplier">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">QCOperationApplier</span></span><a class="headerlink" href="#medsrtqc.core.QCOperationApplier" title="Permalink to this definition">¶</a></dt>
<dd><p>QC operations may be run in many different contexts. The obvious context
is to apply the result of the operation to the underlying
<a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> (the default), but this class is used to give
flexibility should users wish to do something else (e.g., print what
actions would be taken without actually applying them) or require
specialized actions to perform data updates that are impossible or
inconvenient to implement in the <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a> subclass.</p>
<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperationApplier.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperationApplier.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a log message for a given <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a>.
The default method prints the message to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperationApplier.pyplot">
<span class="sig-name descname"><span class="pre">pyplot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperationApplier.pyplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a version of matplotlib.pyplot used for use in a <code class="docutils literal notranslate"><span class="pre">with:</span></code>
statement. The default method returns a context manager that
wraps a dummy version of the module that does nothing.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">medsrtqc.core</span> <span class="kn">import</span> <span class="n">Profile</span><span class="p">,</span> <span class="n">Trace</span><span class="p">,</span> <span class="n">QCOperationApplier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">applier</span> <span class="o">=</span> <span class="n">QCOperationApplier</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profile</span> <span class="o">=</span> <span class="n">Profile</span><span class="p">({</span><span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">Trace</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">applier</span><span class="o">.</span><span class="n">pyplot</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span> <span class="k">as</span> <span class="n">plt</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">profile</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperationApplier.update_trace">
<span class="sig-name descname"><span class="pre">update_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperationApplier.update_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates a given <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> for a <a class="reference internal" href="#medsrtqc.core.Profile" title="medsrtqc.core.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Profile</span></code></a>.
The default method runs <code class="docutils literal notranslate"><span class="pre">profile[k]</span> <span class="pre">=</span> <span class="pre">trace</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="medsrtqc.core.QCOperationError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">QCOperationError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.QCOperationError" title="Permalink to this definition">¶</a></dt>
<dd><p>An <code class="docutils literal notranslate"><span class="pre">Exception</span></code> subclass with attributes <code class="docutils literal notranslate"><span class="pre">profile</span></code>, <code class="docutils literal notranslate"><span class="pre">trace</span></code>,
and <code class="docutils literal notranslate"><span class="pre">trace_key</span></code>. These errors give an opportunity for inspection
on debugging and potentially more informative printing because
they contain some context.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="medsrtqc.core.Trace">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">medsrtqc.core.</span></span><span class="sig-name descname"><span class="pre">Trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ma.core.MaskedArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_qc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjusted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjusted_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adjusted_qc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pres</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#medsrtqc.core.Trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace objects are a simple representation of a value series.
All attributes of a <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> are <code class="docutils literal notranslate"><span class="pre">numpy</span></code>
<code class="docutils literal notranslate"><span class="pre">MaskedArray</span></code> objects like those that might be read from an Argo
NetCDF file. The <code class="docutils literal notranslate"><span class="pre">value</span></code> attribute is guaranteed
to not be <code class="docutils literal notranslate"><span class="pre">None</span></code>; other attributes are optional and should be
checked in code that uses these objects. QC operations can be
written as functions of <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a> objects and the result of
QC operations is often a modified <a class="reference internal" href="#medsrtqc.core.Trace" title="medsrtqc.core.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trace</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The parameter value. This should be the same units
as would be written to the Argo NetCDF file.</p></li>
<li><p><strong>value_qc</strong> – The parameter QC value.</p></li>
<li><p><strong>adjusted</strong> – The adjusted parameter value.</p></li>
<li><p><strong>adjusted_error</strong> – The error estimate for the adjusted value.</p></li>
<li><p><strong>adjusted_qc</strong> – The adjusted parameter QC value</p></li>
<li><p><strong>pres</strong> – The pressure measurement (in dbar) corresponding to
the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></li>
<li><p><strong>mtime</strong> – The measurement time</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="nc.html" class="btn btn-neutral float-right" title="NetCDF IO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="medsrtqc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Dewey Dunnington.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>